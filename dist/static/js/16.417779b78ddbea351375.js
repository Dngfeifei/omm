webpackJsonp([16],{104:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProcessImg=t.applyUnPass=t.applyPass=t.getDoneList=t.getTodoList=t.viewForm=t.getMineList=void 0;var a=n(10),r=function(e){return e&&e.__esModule?e:{default:e}}(a);t.getMineList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.default.fetchGet("/process/getMineList",e)},t.viewForm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.default.fetchGet("/process/viewForm",e)},t.getTodoList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.default.fetchGet("/process/getTodoList",e)},t.getDoneList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.default.fetchGet("/process/getDoneList",e)},t.applyPass=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.default.fetchGet("/process/pass",e)},t.applyUnPass=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.default.fetchGet("/process/unPass",e)},t.getProcessImg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.default.fetchBlob("/process/processImg",e)}},131:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,o){try{var s=t[r](o),c=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(c).then(function(e){a("next",e)},function(e){a("throw",e)});e(c)}return a("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(21),l=a(i),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=n(1),d=a(f),p=n(5),h=n(104),m=p.Form.Item,g=p.Input.TextArea,v=function(e){function t(){var e,n,a,r;o(this,t);for(var c=arguments.length,i=Array(c),l=0;l<c;l++)i[l]=arguments[l];return n=a=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={taskId:"",baseData:[],formData:[],messages:[],loading:!1,lock:!1,content:"",spinloading:!0},a.handleOk=function(e){a.setState({loading:!0}),(0,h.applyPass)({taskId:a.state.taskId,content:a.state.content}).then(function(e){a.setState({loading:!1}),200==e.code&&(p.message.success("审核通过"),a.props.done(),a.props.onCancel())})},a.handleCancel=function(e){a.setState({loading:!0}),(0,h.applyUnPass)({taskId:a.state.taskId,content:a.state.content}).then(function(e){a.setState({loading:!1}),200==e.code&&(p.message.success("审核拒绝"),a.props.done(),a.props.onCancel())})},a.render=function(e){var t=d.default.createElement("div",null,d.default.createElement(p.Button,{key:"back",onClick:a.handleCancel},"拒绝"),d.default.createElement(p.Button,{key:"submit",type:"primary",loading:a.state.loading,onClick:a.handleOk},"通过"));return d.default.createElement(p.Modal,{title:a.props.config.title,footer:a.props.auth?t:null,visible:a.props.config.visible,onCancel:a.props.onCancel,width:800,style:{top:50,marginBottom:100}},d.default.createElement(p.Spin,{spinning:a.state.spinloading},d.default.createElement(p.Form,null,d.default.createElement(p.Row,{gutter:24},a.state.baseData.map(function(e,t){return d.default.createElement(p.Col,{span:8,key:t,style:{display:"block"}},d.default.createElement(m,{label:e.label,labelCol:{span:7}},e.value))}))),d.default.createElement(p.Form,{className:"flex-view"},d.default.createElement(p.Row,{gutter:24},a.state.formData.map(function(e,t){return d.default.createElement(p.Col,{span:12,key:t,style:{display:"block"}},d.default.createElement(m,{label:e.label,labelCol:{span:7}},e.value))}))),a.state.messages.length>0?d.default.createElement(p.List,{style:{color:"#f81d22"},size:"small",dataSource:a.state.messages,renderItem:function(e){return d.default.createElement(p.List.Item,null,e)}}):null),a.props.auth?d.default.createElement(g,{rows:2,value:a.state.content,onChange:function(e){return a.setState({content:e.target.value})},style:{marginTop:"20px"},placeholder:"请输入审批意见..."}):null)},r=n,s(a,r)}return c(t,e),u(t,[{key:"componentWillReceiveProps",value:function(){function e(e){return t.apply(this,arguments)}var t=r(l.default.mark(function e(t){var n,a=this;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.config!=this.props.config&&t.config.visible&&t.config.item&&t.config.item.id&&(n=t.config.item.id,this.setState({spinloading:!0}),(0,h.viewForm)({id:n}).then(function(e){a.setState({baseData:e.data.baseData,formData:e.data.formData,messages:e.data.messages}),a.setState({spinloading:!1})}),t.config.item.taskId&&this.setState({taskId:t.config.item.taskId}));case 1:case"end":return e.stop()}},e,this)}));return e}()}]),t}(f.Component);t.default=v},43:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,o){try{var s=t[r](o),c=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(c).then(function(e){a("next",e)},function(e){a("throw",e)});e(c)}return a("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(21),l=a(i),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=n(1),d=a(f),p=n(5),h=n(104),m=n(89),g=a(m),v=n(131),y=a(v),b=(p.Button.Group,p.DatePicker.RangePicker),w=function(e){function t(){var e,n,a,c,i=this;o(this,t);for(var u=arguments.length,f=Array(u),m=0;m<u;m++)f[m]=arguments[m];return n=a=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(f))),a.state=Object.assign({},a.state,{auth:!1,searchFun:"",search:Object.assign({condition:""},a.state.pageconf),columns:[{title:"状态",dataIndex:"status",render:function(e){return"审核中"==e?d.default.createElement(p.Tag,{color:"blue"},e):"已拒绝"==e?d.default.createElement(p.Tag,{color:"volcano"},e):d.default.createElement(p.Tag,{color:"lime"},e)}},{title:"停留时间",dataIndex:"waitTime"},{title:"流程标题",dataIndex:"instanceName"},{title:"提交人",dataIndex:"createUser"},{title:"提交时间",dataIndex:"createTime"},{title:"当前节点",dataIndex:"taskName"},{title:"流程图",dataIndex:"process-pic",render:function(e,t){return"审核中"==t.status?d.default.createElement(p.Icon,{type:"eye",onClick:function(){var e=r(l.default.mark(function e(n){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.showProcessPic(t);case 1:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}()}):null}},{title:" 操作 ",dataIndex:"operate",render:function(e,t){return d.default.createElement("a",{style:{display:"inline-block",width:60},onClick:function(){var e=r(l.default.mark(function e(n){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.openForm(t);case 1:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}()},"查看")}}],selectedtable:!1,loading:!0,tabledata:[],modalconf:{visible:!1,item:{}},picmodelConf:{visible:!1,item:{}},processimg:{visible:!1,src:null}}),a.search=r(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({loading:!0});case 2:return t=Object.assign({},a.state.search),a.handleTime(t,"startDate"),a.handleTime(t,"endDate"),e.abrupt("return",a.state.searchFun(t).then(function(e){var t=function(e){return e(e)}(function(e){return function(e){return e.map(function(e){return Object.assign({},e,{key:e.id})})}})(e.data.records);a.setState({tabledata:t,loading:!1,pagination:Object.assign({},a.state.pagination,{total:e.data.total,current:e.data.current})})}));case 6:case"end":return e.stop()}},e,i)})),a.showProcessPic=function(e){(0,h.getProcessImg)({id:e.id}).then(function(e){var t=URL.createObjectURL(e);console.log(t),console.log("received some data"),a.setState({processimg:{visible:!0,src:t}})})},a.openForm=function(e){a.setState({modalconf:{visible:!0,title:e.instanceName,item:e}})},a.done=function(e){a.search()},a.renderSearch=function(e){return d.default.createElement("div",null,d.default.createElement("div",{className:"mgrSearchBar"},d.default.createElement(b,{onChange:function(e){return a.changeSearch({startDate:e[0],endDate:e[1]})},value:[a.state.search.startDate,a.state.search.endDate],className:"search",placeholder:["开始日期","结束日期"]}),d.default.createElement(p.Input,{value:a.state.search.condition,suffix:a.state.search.condition?d.default.createElement(p.Icon,{type:"close-circle",onClick:function(e){return a.changeSearch({condition:""})}}):null,onChange:function(e){return a.changeSearch({condition:e.target.value})},addonBefore:"关键字",placeholder:"流程标题/申请人"}),d.default.createElement(p.Button,{onClick:a.search,type:"primary",icon:"search"},"搜索")))},a.renderBtn=function(e){return d.default.createElement("div",null)},a.rendermodal=function(e){return[d.default.createElement(y.default,{config:a.state.modalconf,auth:a.state.auth,onCancel:function(e){return a.cancelform("modalconf")},done:a.done}),d.default.createElement(p.Modal,{title:"信息",visible:a.state.visible,onOk:a.delete,mask:!1,width:400,onCancel:a.changemodel,okText:"确认",cancelText:"取消"},d.default.createElement("p",null,"是否删除？")),d.default.createElement(p.Modal,{title:"流程图",visible:a.state.processimg.visible,footer:null,mask:!0,width:800,onCancel:function(e){return a.setState({processimg:{visible:!1}})}},d.default.createElement("img",{src:a.state.processimg.src}))]},c=n,s(a,c)}return c(t,e),u(t,[{key:"componentWillMount",value:function(){function e(){return t.apply(this,arguments)}var t=r(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.location.pathname,console.log(t),t.indexOf("applymine")>0?this.setState({auth:!1,searchFun:h.getMineList}):t.indexOf("applytodo")>0?this.setState({auth:!0,searchFun:h.getTodoList}):this.setState({auth:!1,searchFun:h.getDoneList}),this.search();case 4:case"end":return e.stop()}},e,this)}));return e}()}]),t}(g.default);t.default=w},89:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,o){try{var s=t[r](o),c=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(c).then(function(e){a("next",e)},function(e){a("throw",e)});e(c)}return a("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(21),l=a(i),u=n(1),f=a(u),d=n(5),p=n(9),h=function(e){function t(){var e,n,a,c,i=this;o(this,t);for(var u=arguments.length,h=Array(u),m=0;m<u;m++)h[m]=arguments[m];return n=a=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(h))),a.state={columns:[],selectedtable:!0,selected:{},loading:!0,tabledata:[],visible:!1,search:{},pageconf:{limit:10,offset:0},pagination:{total:1,current:1,pageSize:10,onChange:function(e,t){return a.pageChange(e,t)}}},a.pageChange=function(){var e=r(l.default.mark(function e(t,n){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({search:Object.assign({},a.state.search,{offset:(t-1)*n})});case 2:a.search();case 3:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),a.onselect=function(e,t){a.setState({selected:{selectedKeys:e,selectedItems:t}})},a.orderdetail=function(){var e=r(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({selected:{selectedKeys:[t.id],selectedItems:[t]}});case 2:a.addpane(1);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),a.setselect=function(){var e=r(l.default.mark(function e(t,n){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({selected:{selectedKeys:[t.id],selectedItems:[t]}});case 2:n();case 3:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),a.changeSearch=function(e){var t=Object.assign({},a.state.search,e,a.state.pageconf);a.setState({search:t})},a.handleTime=function(e,t){e[t]?e[t]=(0,p.momentFormat)(e[t]):delete e[t]},a.research=function(){var e=r(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({search:Object.assign({},a.state.pageconf),selected:{}});case 2:a.search();case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),a.changemodel=function(e){a.state.selected.selectedKeys&&a.state.selected.selectedKeys.length?a.setState({visible:!a.state.visible}):d.message.warning("请选中表格中的某一记录！")},a.cancelform=function(e){var t={};t[e]=Object.assign({},a.state[e],{visible:!1,item:{}}),a.setState(t)},a.addmodal=function(){var e=r(l.default.mark(function e(t,n){var r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={},r[t]={title:n,visible:!0,type:"add"},a.setState(r);case 3:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),a.editmodal=function(){var e=r(l.default.mark(function e(t,n){var r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.state.selected.selectedKeys&&a.state.selected.selectedKeys.length?(r={},r[t]={title:n,visible:!0,type:"edit",item:a.state.selected.selectedItems[0]},a.setState(r)):d.message.warning("请选中表格中的某一记录！");case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),a.handleOk=function(){var e=r(l.default.mark(function e(t,n,o){var s,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"search";return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.selected.selectedKeys||!a.state.selected.selectedKeys.length){e.next=8;break}return e.next=3,a.setState({confirmLoading:!0});case 3:s={},s[n]=a.state.selected.selectedKeys[0],t(s).then(function(){var e=r(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({visible:!1,confirmLoading:!1});case 2:if(200!=t.code){e.next=6;break}return d.message.success(o+"成功"),a[c](),e.abrupt("return");case 6:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}()),e.next=9;break;case 8:d.message.warning("请选中表格中的某一记录！");case 9:case"end":return e.stop()}},e,i)}));return function(t,n,a){return e.apply(this,arguments)}}(),a.selectJudge=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=a.state.selected;n.selectedKeys&&n.selectedKeys.length?t?e(n.selectedKeys,n.selectedItems):e(n.selectedKeys[0],n.selectedItems[0]):d.message.warning("请选中表格中的某一记录！")},a.renderSearch=function(e){return null},a.renderBtn=function(e){return null},a.renderBottomBtn=function(e){return null},a.rendermodal=function(e){return null},a.renderTable=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.state.pagination;return f.default.createElement(d.Table,{size:"small",bordered:!0,loading:a.state.loading,rowSelection:e,columns:a.state.columns,pagination:t,locale:{emptyText:"暂无数据"},dataSource:a.state.tabledata})},a.render=function(e){var t={type:"radio",selectedRowKeys:a.state.selected.selectedKeys,onChange:a.onselect};return f.default.createElement("div",{className:"mgrWrapper"},a.renderSearch(),a.renderBtn(),a.renderTable(a.state.selectedtable?t:null),a.renderBottomBtn(),a.rendermodal())},c=n,s(a,c)}return c(t,e),t}(u.Component);t.default=h}});
//# sourceMappingURL=16.417779b78ddbea351375.js.map